"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[254],{254:(e,t,_)=>{var r=_(852),o=_(734);(0,o.lI)(r),r.__wbindgen_start();const n=document.getElementById("connect-four-canvas"),s=n.getContext("2d"),i=1.5;let l=o.PU.Opponent;n.width=444,n.height=381;let a,g=o.sL.empty();const c=function(){return g.has_won()?(console.log("Computer won!"),a=o.PU.Player,!0):!!g.has_lost()&&(console.log("Player won!"),a=o.PU.Opponent,!0)},b=()=>{console.log("Drawing board"),s.strokeStyle="red";for(let e=0;e<7;e++)for(let t=0;t<6;t++){let _=g.get_at(e,6-t-1);void 0!==_&&(s.beginPath(),_===o.PU.Opponent&&(s.fillStyle="red"),_===o.PU.Player&&(s.fillStyle="blue"),s.arc(63*e+3+30,63*t+3+30,30,0,2*Math.PI),s.fill())}};n.addEventListener("click",(e=>{const t=n.getBoundingClientRect(),_=n.width/t.width,r=(n.height,t.height,(e.clientX-t.left)*_);e.clientY,t.top,function(e){if(void 0!==a)return;if(l===o.PU.Player)return;let t=g.play_column(e,o.PU.Opponent);if(void 0===t)return;if(g.free(),g=t,console.log("Player made move"),c())return;l=o.PU.Player;let _=0;console.log("Number of stones: ",g.number_of_stones());let r=(new Date).getTime();g.number_of_stones()>=15?(console.log("[Endgame] Solving Complete board"),_=o.kH(g,42,o.eL.Weak)):(console.log("[Earlygame] Solving with heuristic score and depth: 15"),_=o.kH(g,17,o.eL.Strong));let n=(new Date).getTime();console.log("Time: ",n-r,"ms, Searched ",_.nodes_searched.toLocaleString()," Nodes");let s="Nan";n-r>0&&(s=(_.nodes_searched/BigInt(n-r)).toLocaleString()),console.log("Performance: ",s,"kN/s"),0===_.end_in?console.log("Score = ",_.score):_.score>0?console.log("Computer wins in ",_.end_in):console.log("Player wins in ",_.end_in),g.set_at(_.mov,o.PU.Player),l=o.PU.Opponent,c()}(Math.min(Math.floor(r/63),6)),b()})),(()=>{s.beginPath(),s.strokeStyle="black";for(let e=0;e<=8;e++)s.moveTo(63*e+i,i),s.lineTo(63*e+i,379.5);for(let e=0;e<=7;e++)s.moveTo(i,63*e+i),s.lineTo(442.5,63*e+i);s.stroke()})(),b()},734:(e,t,_)=>{let r;function o(e){r=e}_.d(t,{PU:()=>a,Qn:()=>p,bL:()=>u,eL:()=>g,kH:()=>l,lI:()=>o,sL:()=>b});let n=new("undefined"==typeof TextDecoder?(0,module.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});n.decode();let s=null;function i(e){return null==e}function l(e,t,_){!function(e,t){if(!(e instanceof t))throw new Error(`expected instance of ${t.name}`)}(e,b);const o=r.solve(e.__wbg_ptr,t,_);return w.__wrap(o)}const a=Object.freeze({Opponent:0,0:"Opponent",Player:1,1:"Player"}),g=Object.freeze({Strong:0,0:"Strong",Weak:1,1:"Weak"});"undefined"==typeof FinalizationRegistry||new FinalizationRegistry((e=>r.__wbg_bestmove_free(e>>>0,1)));const c="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>r.__wbg_bitboard_free(e>>>0,1)));class b{static __wrap(e){e>>>=0;const t=Object.create(b.prototype);return t.__wbg_ptr=e,c.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,c.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_bitboard_free(e,0)}get player(){const e=r.__wbg_get_bitboard_player(this.__wbg_ptr);return BigInt.asUintN(64,e)}set player(e){r.__wbg_set_bitboard_player(this.__wbg_ptr,e)}get occupied(){const e=r.__wbg_get_bitboard_occupied(this.__wbg_ptr);return BigInt.asUintN(64,e)}set occupied(e){r.__wbg_set_bitboard_occupied(this.__wbg_ptr,e)}number_of_stones(){return r.bitboard_number_of_stones(this.__wbg_ptr)>>>0}static empty(){const e=r.bitboard_empty();return b.__wrap(e)}set_at_coordinate(e,t,_){r.bitboard_set_at_coordinate(this.__wbg_ptr,e,t,i(_)?2:_)}set_at(e,t){r.bitboard_set_at(this.__wbg_ptr,e,i(t)?2:t)}get_at(e,t){const _=r.bitboard_get_at(this.__wbg_ptr,e,t);return 2===_?void 0:_}switch_players(){r.bitboard_switch_players(this.__wbg_ptr)}has_won(){return 0!==r.bitboard_has_won(this.__wbg_ptr)}has_lost(){return 0!==r.bitboard_has_lost(this.__wbg_ptr)}is_move_valid(e){return 0!==r.bitboard_is_move_valid(this.__wbg_ptr,e)}play_column(e,t){const _=r.bitboard_play_column(this.__wbg_ptr,e,t);return 0===_?void 0:b.__wrap(_)}}const d="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>r.__wbg_solveresult_free(e>>>0,1)));class w{static __wrap(e){e>>>=0;const t=Object.create(w.prototype);return t.__wbg_ptr=e,d.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,d.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_solveresult_free(e,0)}get score(){return r.__wbg_get_solveresult_score(this.__wbg_ptr)}set score(e){r.__wbg_set_solveresult_score(this.__wbg_ptr,e)}get mov(){const e=r.__wbg_get_solveresult_mov(this.__wbg_ptr);return BigInt.asUintN(64,e)}set mov(e){r.__wbg_set_solveresult_mov(this.__wbg_ptr,e)}get nodes_searched(){const e=r.__wbg_get_solveresult_nodes_searched(this.__wbg_ptr);return BigInt.asUintN(64,e)}set nodes_searched(e){r.__wbg_set_solveresult_nodes_searched(this.__wbg_ptr,e)}get end_in(){return r.__wbg_get_solveresult_end_in(this.__wbg_ptr)}set end_in(e){r.__wbg_set_solveresult_end_in(this.__wbg_ptr,e)}static new(e,t){const _=r.solveresult_new(e,t);return w.__wrap(_)}}function u(){const e=r.__wbindgen_export_0,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)}function p(e,t){throw new Error((_=e,o=t,_>>>=0,n.decode((null!==s&&0!==s.byteLength||(s=new Uint8Array(r.memory.buffer)),s).subarray(_,_+o))));var _,o}},852:(e,t,_)=>{var r=_.w[e.id];for(var o in _.r(t),r)o&&(t[o]=r[o]);_(734),r[""]()}}]);